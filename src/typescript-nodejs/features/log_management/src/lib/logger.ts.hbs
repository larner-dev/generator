import pino from "pino";
import { name } from "../../package.json";
{{#includes features "log_management_logtail"}}
import { secrets } from "./secrets";

const { LOGTAIL_TOKEN } = await secrets();

const transport = pino.transport({
  targets: [
    {
      target: "@logtail/pino",
      level: process.env.LOG_LEVEL || "info",
      options: { sourceToken: LOGTAIL_TOKEN },
    },
  ],
});
{{/includes}}
{{#includes features "log_management_syslog"}}
const transport = pino.transport({
  target: 'pino-syslog',
  level: process.env.LOG_LEVEL,
});
{{/includes}}
export const logger = pino(transport).child({ source: name });